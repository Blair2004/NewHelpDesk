import{D as w,g as d,n}from"./app-4HU7gmEH.js";const T=w("thread",()=>{const s=d([]),o=d(null),r=d(!1),u=d({status:null,category_id:null,assigned_to_me:!1,unassigned:!1});async function i(){r.value=!0;try{const e=await n.get("/api/threads",{params:u.value});s.value=e.data.data}catch(e){console.error("Failed to fetch threads:",e)}finally{r.value=!1}}async function h(e){r.value=!0;try{const a=await n.get(`/api/threads/${e}`);o.value=a.data.data}catch(a){console.error("Failed to fetch thread:",a)}finally{r.value=!1}}async function f(e){r.value=!0;try{const a=await n.post("/api/threads",e);return s.value.unshift(a.data.data),a.data.data}catch(a){throw console.error("Failed to create thread:",a),a}finally{r.value=!1}}async function v(e,a){var l;r.value=!0;try{const t=await n.put(`/api/threads/${e}`,a),c=s.value.findIndex(g=>g.id===e);return c!==-1&&(s.value[c]=t.data.data),((l=o.value)==null?void 0:l.id)===e&&(o.value=t.data.data),t.data.data}catch(t){throw console.error("Failed to update thread:",t),t}finally{r.value=!1}}async function p(e){r.value=!0;try{await n.delete(`/api/threads/${e}`),s.value=s.value.filter(a=>a.id!==e)}catch(a){throw console.error("Failed to delete thread:",a),a}finally{r.value=!1}}async function y(e,a){var l;try{const t=await n.post(`/api/threads/${e}/messages`,a);return((l=o.value)==null?void 0:l.id)===e&&o.value.messages.push(t.data.data),t.data.data}catch(t){throw console.error("Failed to send message:",t),t}}return{threads:s,currentThread:o,loading:r,filters:u,fetchThreads:i,fetchThread:h,createThread:f,updateThread:v,deleteThread:p,sendMessage:y}});export{T as u};
