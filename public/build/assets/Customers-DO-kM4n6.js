import{g as c,h as b,n as x,c as r,a as t,q as v,y as C,v as k,F as w,l as S,o as d,t as o,p as _}from"./app-4HU7gmEH.js";import{h as A}from"./moment-C5S46NFB.js";const F={class:"p-8"},V={class:"card mb-6"},B={class:"flex gap-4"},D={class:"card"},L={class:"w-full"},N={class:"py-3 px-4 font-medium"},I={class:"py-3 px-4 text-gray-600"},M={class:"py-3 px-4"},$={class:"py-3 px-4"},E={class:"py-3 px-4 text-sm text-gray-600"},T={class:"py-3 px-4"},U={class:"py-3 px-4 text-right"},q=["onClick"],z=["onClick"],H={__name:"Customers",setup(Q){const p=c([]),l=c(""),n=c("");b(()=>{i()});async function i(){try{const e={};l.value&&(e.search=l.value),n.value&&(e.status=n.value);const a=await x.get("/api/customers",{params:e});p.value=a.data.data||a.data}catch(e){console.error("Failed to load customers:",e)}}function u(){i()}function h(e){console.log("View customer:",e)}async function y(e){try{await x.put(`/api/customers/${e.id}/status`,{is_active:!e.is_active}),await i()}catch(a){alert("Failed to update customer status"),console.error(a)}}function f(e){return e?A(e).fromNow():"Never"}function m(e){return e?"inline-block px-2 py-1 text-xs rounded bg-green-100 text-green-800":"inline-block px-2 py-1 text-xs rounded bg-gray-100 text-gray-800"}return(e,a)=>(d(),r("div",F,[a[4]||(a[4]=t("h1",{class:"text-3xl font-bold mb-8"},"Customers",-1)),t("div",V,[t("div",B,[v(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),type:"text",placeholder:"Search customers...",class:"input flex-1",onInput:u},null,544),[[C,l.value]]),v(t("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>n.value=s),onChange:u,class:"input"},[...a[2]||(a[2]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[k,n.value]])])]),t("div",D,[t("table",L,[a[3]||(a[3]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-4"},"Name"),t("th",{class:"text-left py-3 px-4"},"Email"),t("th",{class:"text-left py-3 px-4"},"Licenses"),t("th",{class:"text-left py-3 px-4"},"Threads"),t("th",{class:"text-left py-3 px-4"},"Last Login"),t("th",{class:"text-left py-3 px-4"},"Status"),t("th",{class:"text-right py-3 px-4"},"Actions")])],-1)),t("tbody",null,[(d(!0),r(w,null,S(p.value,s=>(d(),r("tr",{key:s.id,class:"border-b"},[t("td",N,o(s.name),1),t("td",I,o(s.email),1),t("td",M,o(s.licenses_count||0),1),t("td",$,o(s.threads_count||0),1),t("td",E,o(f(s.last_login_at)),1),t("td",T,[t("span",{class:_(m(s.is_active))},o(s.is_active?"Active":"Inactive"),3)]),t("td",U,[t("button",{onClick:g=>h(s.id),class:"text-blue-600 hover:underline mr-3"}," View ",8,q),t("button",{onClick:g=>y(s),class:_([s.is_active?"text-red-600":"text-green-600","hover:underline"])},o(s.is_active?"Deactivate":"Activate"),11,z)])]))),128))])])])]))}};export{H as default};
