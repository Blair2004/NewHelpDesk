import{g as d,h as b,n as r,c as _,a as s,x as p,q as o,y as u,s as x,t as c,o as y}from"./app-4HU7gmEH.js";const g={class:"p-8"},S={class:"max-w-4xl space-y-6"},k={class:"card"},w={class:"flex items-center"},V=["disabled"],U={class:"card"},L=["disabled"],M={__name:"Settings",setup(A){const l=d({profile:"",licenses_read:"",licenses_update:"",enable_licenses_update:!1}),n=d({filter_field:"",filter_values:""}),a=d(!1);b(async()=>{await m()});async function m(){try{const e=(await r.get("/api/settings")).data;l.value={profile:e.oauth_scope_profile||"",licenses_read:e.oauth_scope_licenses_read||"",licenses_update:e.oauth_scope_licenses_update||"",enable_licenses_update:e.oauth_enable_licenses_update||!1},n.value={filter_field:e.license_filter_field||"",filter_values:e.license_filter_values||""}}catch(i){console.error("Failed to load settings:",i)}}async function v(){a.value=!0;try{await r.put("/api/settings/oauth-scopes",l.value),alert("OAuth settings saved successfully")}catch(i){alert("Failed to save settings"),console.error(i)}finally{a.value=!1}}async function f(){a.value=!0;try{await r.put("/api/settings",n.value),alert("License settings saved successfully")}catch(i){alert("Failed to save settings"),console.error(i)}finally{a.value=!1}}return(i,e)=>(y(),_("div",g,[e[16]||(e[16]=s("h1",{class:"text-3xl font-bold mb-8"},"Settings",-1)),s("div",S,[s("div",k,[e[10]||(e[10]=s("h2",{class:"text-xl font-semibold mb-4"},"OAuth Configuration",-1)),s("form",{onSubmit:p(v,["prevent"]),class:"space-y-4"},[s("div",null,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium mb-2"},"Profile Scope",-1)),o(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.profile=t),type:"text",class:"input",placeholder:"read-profile"},null,512),[[u,l.value.profile]])]),s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium mb-2"},"Licenses Read Scope",-1)),o(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.licenses_read=t),type:"text",class:"input",placeholder:"read-licenses"},null,512),[[u,l.value.licenses_read]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium mb-2"},"Licenses Update Scope",-1)),o(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.licenses_update=t),type:"text",class:"input",placeholder:"update-licenses"},null,512),[[u,l.value.licenses_update]])]),s("div",w,[o(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.enable_licenses_update=t),type:"checkbox",id:"enable_licenses_update",class:"mr-2"},null,512),[[x,l.value.enable_licenses_update]]),e[9]||(e[9]=s("label",{for:"enable_licenses_update",class:"text-sm"},"Enable licenses update scope",-1))]),s("button",{type:"submit",class:"btn btn-primary",disabled:a.value},c(a.value?"Saving...":"Save OAuth Settings"),9,V)],32)]),s("div",U,[e[15]||(e[15]=s("h2",{class:"text-xl font-semibold mb-4"},"License Validation",-1)),s("form",{onSubmit:p(f,["prevent"]),class:"space-y-4"},[s("div",null,[e[11]||(e[11]=s("label",{class:"block text-sm font-medium mb-2"},"Filter Field",-1)),o(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.filter_field=t),type:"text",class:"input",placeholder:"item_id"},null,512),[[u,n.value.filter_field]]),e[12]||(e[12]=s("p",{class:"text-sm text-gray-600 mt-1"},"The field name to filter licenses by",-1))]),s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium mb-2"},"Allowed Values",-1)),o(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.filter_values=t),type:"text",class:"input",placeholder:"123,456,789"},null,512),[[u,n.value.filter_values]]),e[14]||(e[14]=s("p",{class:"text-sm text-gray-600 mt-1"},"Comma-separated list of allowed values",-1))]),s("button",{type:"submit",class:"btn btn-primary",disabled:a.value},c(a.value?"Saving...":"Save License Settings"),9,L)],32)])])]))}};export{M as default};
