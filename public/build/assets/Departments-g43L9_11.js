import{g as r,h as w,n as i,c as d,a as t,j as D,F as k,l as C,t as u,x as g,q as b,y as f,o as c}from"./app-4HU7gmEH.js";const M={class:"p-8"},F={class:"flex justify-between items-center mb-8"},N={class:"card"},$={class:"w-full"},V={class:"py-3 px-4 font-medium"},j={class:"py-3 px-4 text-gray-600"},A={class:"py-3 px-4"},B={class:"py-3 px-4 text-right"},E=["onClick"],S=["onClick"],q={key:0,class:"modal"},U={class:"modal-content"},L={class:"text-xl font-bold mb-4"},G={__name:"Departments",setup(T){const m=r([]),o=r(!1),l=r(!1),n=r({name:"",description:""});w(()=>{p()});async function p(){try{const a=await i.get("/api/departments");m.value=a.data}catch(a){console.error("Failed to load departments:",a)}}function x(a){l.value=!0,n.value={...a},o.value=!0}async function y(){try{l.value?await i.put(`/api/departments/${n.value.id}`,n.value):await i.post("/api/departments",n.value),v(),await p()}catch(a){alert("Failed to save department"),console.error(a)}}async function _(a){if(confirm("Are you sure you want to delete this department?"))try{await i.delete(`/api/departments/${a}`),await p()}catch(e){alert("Failed to delete department"),console.error(e)}}function v(){o.value=!1,l.value=!1,n.value={name:"",description:""}}return(a,e)=>(c(),d("div",M,[t("div",F,[e[3]||(e[3]=t("h1",{class:"text-3xl font-bold"},"Departments",-1)),t("button",{onClick:e[0]||(e[0]=s=>o.value=!0),class:"btn btn-primary"}," Create Department ")]),t("div",N,[t("table",$,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-4"},"Name"),t("th",{class:"text-left py-3 px-4"},"Description"),t("th",{class:"text-left py-3 px-4"},"Members"),t("th",{class:"text-right py-3 px-4"},"Actions")])],-1)),t("tbody",null,[(c(!0),d(k,null,C(m.value,s=>(c(),d("tr",{key:s.id,class:"border-b"},[t("td",V,u(s.name),1),t("td",j,u(s.description||"N/A"),1),t("td",A,u(s.members_count||0),1),t("td",B,[t("button",{onClick:h=>x(s),class:"text-blue-600 hover:underline mr-3"},"Edit",8,E),t("button",{onClick:h=>_(s.id),class:"text-red-600 hover:underline"},"Delete",8,S)])]))),128))])])]),o.value?(c(),d("div",q,[t("div",U,[t("h2",L,u(l.value?"Edit":"Create")+" Department",1),t("form",{onSubmit:g(y,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-2"},"Name",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.name=s),type:"text",class:"input",required:""},null,512),[[f,n.value.name]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),b(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.description=s),class:"input",rows:"3"},null,512),[[f,n.value.description]])]),t("div",{class:"flex gap-3 justify-end"},[t("button",{type:"button",onClick:v,class:"btn"},"Cancel"),e[7]||(e[7]=t("button",{type:"submit",class:"btn btn-primary"},"Save",-1))])],32)])])):D("",!0)]))}};export{G as default};
