import{c as d,o as a,a as t,g as c,h as C,j as p,q as r,v as b,e as o,s as f,F as T,l as _,x,y as g,z as V,t as m,d as M,p as U}from"./app-4HU7gmEH.js";import{u as $}from"./thread-HO_BQTKl.js";import{h as S}from"./moment-C5S46NFB.js";function j(y,v){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z","clip-rule":"evenodd"})])}const B={class:"p-8"},N={class:"flex justify-between items-center mb-8"},q={class:"card mb-6"},z={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},D={class:"flex items-end"},F={class:"flex items-center"},P={class:"flex items-end"},A={class:"flex items-center"},R={class:"space-y-4"},Z=["onClick"],E={class:"flex justify-between items-start"},L={class:"flex-1"},O={class:"text-lg font-semibold mb-2"},G={class:"flex items-center space-x-4 text-sm text-gray-600"},H={key:0,class:"px-2 py-1 bg-gray-100 rounded"},I={class:"flex items-center space-x-2"},J={class:"bg-white rounded-lg p-6 max-w-2xl w-full"},K={class:"mb-4"},Q={class:"mb-4"},W={class:"mb-4"},X={class:"flex justify-end space-x-4"},le={__name:"Threads",setup(y){const v=V(),l=$(),u=c(!1),i=c({title:"",content:"",visibility:"public"});C(()=>{l.fetchThreads()});async function h(){try{const n=await l.createThread(i.value);u.value=!1,i.value={title:"",content:"",visibility:"public"},v.push(`/dashboard/threads/${n.id}`)}catch(n){console.error("Failed to create thread:",n)}}function w(n){return S(n).fromNow()}function k(n){const e={open:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",resolved:"bg-blue-100 text-blue-800",closed:"bg-gray-100 text-gray-800"};return e[n]||e.open}return(n,e)=>(a(),d("div",B,[t("div",N,[e[12]||(e[12]=t("h1",{class:"text-3xl font-bold"},"Threads",-1)),t("button",{onClick:e[0]||(e[0]=s=>u.value=!0),class:"btn btn-primary"}," New Thread ")]),t("div",q,[t("div",z,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).filters.status=s),onChange:e[2]||(e[2]=(...s)=>o(l).fetchThreads&&o(l).fetchThreads(...s)),class:"input"},[...e[13]||(e[13]=[t("option",{value:null},"All",-1),t("option",{value:"open"},"Open",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"resolved"},"Resolved",-1),t("option",{value:"closed"},"Closed",-1)])],544),[[b,o(l).filters.status]])]),t("div",D,[t("label",F,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>o(l).filters.assigned_to_me=s),onChange:e[4]||(e[4]=(...s)=>o(l).fetchThreads&&o(l).fetchThreads(...s)),class:"mr-2"},null,544),[[f,o(l).filters.assigned_to_me]]),e[15]||(e[15]=t("span",{class:"text-sm"},"Assigned to me",-1))])]),t("div",P,[t("label",A,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>o(l).filters.unassigned=s),onChange:e[6]||(e[6]=(...s)=>o(l).fetchThreads&&o(l).fetchThreads(...s)),class:"mr-2"},null,544),[[f,o(l).filters.unassigned]]),e[16]||(e[16]=t("span",{class:"text-sm"},"Unassigned",-1))])])])]),t("div",R,[(a(!0),d(T,null,_(o(l).threads,s=>(a(),d("div",{key:s.id,class:"card hover:shadow-md transition-shadow cursor-pointer",onClick:Y=>n.$router.push(`/dashboard/threads/${s.id}`)},[t("div",E,[t("div",L,[t("h3",O,m(s.title),1),t("div",G,[t("span",null,m(s.owner.name),1),t("span",null,m(w(s.created_at)),1),s.category?(a(),d("span",H,m(s.category.name),1)):p("",!0)])]),t("div",I,[t("span",{class:U([k(s.status),"px-3 py-1 text-sm rounded"])},m(s.status),3),s.is_locked?(a(),M(o(j),{key:0,class:"w-5 h-5 text-gray-500"})):p("",!0)])])],8,Z))),128))]),u.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e[11]||(e[11]=x(s=>u.value=!1,["self"]))},[t("div",J,[e[22]||(e[22]=t("h2",{class:"text-2xl font-bold mb-4"},"Create New Thread",-1)),t("form",{onSubmit:x(h,["prevent"])},[t("div",K,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.title=s),type:"text",class:"input",required:""},null,512),[[g,i.value.title]])]),t("div",Q,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium mb-2"},"Message",-1)),r(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.content=s),rows:"6",class:"input",required:""},null,512),[[g,i.value.content]])]),t("div",W,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-2"},"Visibility",-1)),r(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.visibility=s),class:"input"},[...e[19]||(e[19]=[t("option",{value:"public"},"Public",-1),t("option",{value:"private"},"Private",-1)])],512),[[b,i.value.visibility]])]),t("div",X,[t("button",{type:"button",onClick:e[10]||(e[10]=s=>u.value=!1),class:"btn btn-secondary"}," Cancel "),e[21]||(e[21]=t("button",{type:"submit",class:"btn btn-primary"},"Create",-1))])],32)])])):p("",!0)]))}};export{le as default};
